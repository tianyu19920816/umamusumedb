# UmamusumeDB 代码审查报告
**审查日期**: 2025-10-05
**审查视角**: 赛马娘游戏忠实玩家

---

## 📊 数据完整性评估

### ✅ 优势

#### 1. 角色数据 (60个角色)
- **覆盖范围**: 包含从初期角色到2025年新实装角色
- **数据结构**: 完整的属性、成长率、适性、固有技能
- **特色角色**:
  - ✓ 经典角色：Special Week, Silence Suzuka, Tokai Teio
  - ✓ 2025新角色：Almond Eye, Gran Alegria, Loves Only You
  - ✓ 特殊版本：Oguri Cap (Starlight Beat), Narita Taishin (Nevertheless)

**数据质量**: 初始属性、成长率、适性评级准确

#### 2. 支援卡数据 (119张卡)
- **稀有度分布**: 81张SSR, 38张SR/R
- **类型覆盖**: Speed, Stamina, Power, Guts, Wisdom, Friend
- **数据完整**: 友情加成、训练加成、技能效果

#### 3. 技能数据 (47个技能)
- **技能类型**: 速度、耐力、位置、战术技能
- **效果描述**: 英文翻译准确，效果清晰
- **代表技能**: Arc Maestro, Triumphant Pulse, Speed Star

---

## ⚠️ 发现的问题

### 1. 数据完整性问题

#### 🔴 严重问题

**角色数据不足**
- **实际游戏角色数**: 根据Game8数据，游戏中有约**90+可育成角色**
- **数据库现有**: 仅60个角色
- **缺失约**: 30+个角色

**缺失的关键角色示例**:
- Hishi Amazon (最新实装SSR)
- Fuji Kiseki (Shooting Star Revue)
- El Condor Pasa (Kukulkan Warrior)
- Grass Wonder (Saintly Jade Cleric)
- Marvelous Sunday (Halloween版本)
- Hishi Akebono (Halloween版本)
- 多个季节/活动限定版本

**支援卡数据不完整**
- 游戏中支援卡数量远超119张
- 缺少大量最新实装的SSR支援卡
- 缺少完整的SR/R卡池

#### 🟡 中等问题

**技能数据简化**
- 技能效果描述过于简单（如"Speed +++"）
- 缺少具体数值（应为"速度+0.35"等）
- 缺少发动条件详细说明
- 缺少持续时间、冷却时间等

**角色数据不完整**
- `awakening_skills` 字段为空数组
- 缺少因子继承相关数据
- 缺少角色剧情、声优信息

### 2. 工具功能评估

#### ✅ 可用的工具

**Training Calculator** (`src/components/tools/TrainingCalculator.tsx`)
- ✓ 基础训练计算
- ✓ 支援卡加成
- ✓ 干劲（Motivation）影响
- ⚠️ 训练基础数值准确，但公式可能需要优化

**Factor Calculator** (`src/components/tools/FactorCalculator.tsx`)
- ✓ 因子继承概率计算
- ✓ 相性加成
- ✓ 星级影响
- ✅ 继承率数据准确：
  - Parent 1★: 70%, 2★: 60%, 3★: 50%
  - Grandparent 1★: 21%, 2★: 18%, 3★: 15%

**Support Deck Builder**
- ✓ 卡组构建功能
- ⚠️ 缺少最新卡片数据

#### 🔴 工具准确性问题

**Training Calculator 公式问题**:

当前代码:
```typescript
baseStats: { speed: 10, stamina: 0, power: 2, guts: 0, wisdom: 0, skillPt: 4 }
```

**实际游戏公式** (根据Game8):
```
训练获得 = (基础值 + 属性加成) × (1 + 成长率) × (1 + 体力系数) ×
          (1 + 干劲系数) × (1 + 训练效果) × (1 + 支援卡数量 × 0.05) ×
          友情训练补正
```

**问题**:
- 缺少成长率影响
- 缺少体力（condition）影响
- 友情训练倍率计算可能不准确
- 缺少训练上限机制（单次+100上限，1200+减半）

---

## 🎮 游戏机制准确性

### ✅ 准确的机制

1. **适性系统**: S/A/B/C/D/E/F/G 评级正确
2. **稀有度**: 3星（SSR）、2星（SR）、1星（R）正确
3. **基础属性**: Speed, Stamina, Power, Guts, Wisdom 正确
4. **跑法适性**: Escape, Lead, Between, Chase 正确
5. **距离适性**: Sprint, Mile, Medium, Long 正确

### ⚠️ 需要验证的机制

1. **训练失败率**: 代码中的失败率数值需要与游戏对比
2. **技能点获得**: skillPt数值需要验证
3. **友情训练触发**: 80%阈值需确认

---

## 💡 改进建议

### 🔥 高优先级

1. **补充角色数据**
   - 添加缺失的30+个角色
   - 包括所有限定版本（Halloween, 新年, 圣诞等）
   - 添加2025年新实装角色

2. **完善技能数据**
   - 添加具体数值（speed +0.35而非speed +++）
   - 添加发动条件
   - 添加持续时间、冷却时间
   - 区分金技能/通常技能

3. **修正训练计算公式**
   - 实现完整的训练计算公式
   - 添加训练上限机制
   - 添加体力影响系数

4. **补充支援卡数据**
   - 添加最新SSR支援卡
   - 完整的技能列表
   - 完整的Lv1/30/50数值

### 📈 中优先级

5. **添加缺失字段**
   - `awakening_skills`: 觉醒技能列表
   - `scenario_link`: 剧情关联
   - `voice_actor`: 声优信息
   - `release_date`: 实装日期

6. **工具增强**
   - 添加体力计算器
   - 添加赛程推荐工具
   - 添加相性查询工具
   - 添加因子规划工具

7. **数据本地化**
   - 添加中文翻译
   - 完善日文原文

### 🎨 低优先级

8. **UI增强**
   - 角色筛选功能（按适性、稀有度）
   - 支援卡筛选（按类型、稀有度、技能）
   - 收藏/标记功能

9. **社区功能**
   - 用户评分系统
   - 育成方案分享
   - 卡组分享

---

## 📝 数据来源建议

### 推荐的数据源

1. **官方来源**:
   - https://umamusume.jp/ (官方网站)
   - https://game8.co/games/Umamusume-Pretty-Derby/ (Game8攻略站)

2. **社区数据库**:
   - https://gametora.com/umamusume/ (GameTora)
   - https://gamewith.jp/uma-musume/ (GameWith日文)
   - https://umamusume.run/ (工具和数据)

3. **Wiki资源**:
   - https://umamusu.wiki/ (英文Wiki)
   - https://umamusume.fandom.com/ (Fandom Wiki)

---

## 🎯 总结评分

| 项目 | 评分 | 说明 |
|------|------|------|
| 数据完整性 | 6/10 | 缺失30+角色，支援卡不全 |
| 数据准确性 | 8/10 | 现有数据质量高，但需验证 |
| 工具可用性 | 7/10 | 基础功能可用，公式需优化 |
| 用户体验 | 8/10 | UI清晰，但缺少筛选功能 |
| 维护性 | 9/10 | 代码结构清晰，易于维护 |
| **总体评分** | **7.6/10** | **良好但需要数据补充** |

---

## ✅ 行动计划

### 短期 (1-2周)
- [ ] 补充缺失的30+个角色数据
- [ ] 修正训练计算公式
- [ ] 完善技能效果描述

### 中期 (1个月)
- [ ] 补充完整支援卡数据
- [ ] 添加觉醒技能数据
- [ ] 实现高级筛选功能

### 长期 (持续)
- [ ] 跟踪游戏更新，及时添加新角色
- [ ] 社区反馈收集和改进
- [ ] 多语言支持完善

---

**结论**: UmamusumeDB 是一个有良好基础的项目，代码质量高，核心功能可用。主要问题是**数据不完整**，需要补充约30+个角色和大量支援卡数据。训练计算公式需要优化以匹配游戏实际机制。建议优先补充数据，然后优化工具准确性。

---

*本报告由忠实赛马娘玩家视角编写，基于2025年10月游戏现状*
